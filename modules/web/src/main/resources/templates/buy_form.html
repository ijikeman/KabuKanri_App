<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>株式購入</title>
</head>
<body>
    <div style="display: flex; gap: 20px; border-bottom: 1px solid #ccc; padding-bottom: 10px; margin-bottom: 20px;">
        <a href="/stock">銘柄マスタ一覧</a>
        <a href="/stock/register">銘柄登録</a>
        <a href="/owner">所有者一覧</a>
        <a href="/holdings">ポートフォリオ</a>
    </div>
    <h1>株式購入</h1>

    <form th:action="@{/transaction/buy}" method="post">
        <div>
            <label for="ownerId">所有者:</label>
            <select id="ownerId" name="ownerId" required>
                <option value="">-- 選択してください --</option>
                <option th:each="owner : ${owners}"
                        th:value="${owner.id}"
                        th:text="${owner.name}"
                        th:selected="${owner.id == selectedOwnerId}">
                </option>
            </select>
        </div>
        <div>
            <label for="stockId">銘柄:</label>
            <select id="stockId" name="stockId" required>
                <option value="">-- 選択してください --</option>
                <option th:each="stock : ${stocks}"
                        th:value="${stock.id}"
                        th:text="${stock.name + ' (' + stock.code + ')'}">
                </option>
            </select>
        </div>
        <div>
            <label for="brokerId">証券会社:</label>
            <select id="brokerId" name="brokerId" required>
                <option value="">-- 選択してください --</option>
                <option th:each="broker : ${brokers}"
                        th:value="${broker.id}"
                        th:text="${broker.name}">
                </option>
            </select>
        </div>
        <div>
            <label for="quantity">数量:</label>
            <input type="number" id="quantity" name="quantity" required min="1">
        </div>
        <div>
            <label for="pricePerShare">株価:</label>
            <input type="number" id="pricePerShare" name="pricePerShare" required min="0" step="any">
        </div>
        <div>
            <label for="fee">手数料:</label>
            <input type="number" id="fee" name="fee" required min="0">
        </div>
        <div>
            <label for="transactionAt">取引日:</label>
            <input type="date" id="transactionAt" name="transactionAt" th:value="${#temporals.format(#temporals.createNow(), 'yyyy-MM-dd')}" required>
        </div>
        <div>
            <button type="submit">購入を記録</button>
        </div>
    </form>

    <p><a th:href="@{/holdings(ownerId=${selectedOwnerId})}">ポートフォリオに戻る</a></p>
</body>
</html>
